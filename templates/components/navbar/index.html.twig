<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
<style>
	@keyframes slideDown {
		from {
			opacity: 0;
			transform: translateY(-10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.animate-slideDown {
		animation: slideDown 0.3s ease-out forwards;
	}
</style>

<nav class="bg-white shadow-md py-4 px-6 flex justify-between items-center">
	<a href="/" class="text-xl font-bold text-gray-700 hover:text-green-600 duration-200">Pedibus Jambus</a>

	<!-- Menu desktop -->
	<div class="hidden md:flex gap-x-4">
		{% if is_granted('IS_AUTHENTICATED_FULLY') %}
			<a href="/logout" class="text-gray-700 hover:text-green-600 duration-200">Se déconnecter</a>
		{% else %}
			<a href="/login" class="text-gray-700 hover:text-green-600 duration-200">Se connecter</a>
			<a href="/register" class="text-gray-700 hover:text-green-600 duration-200">S'inscrire</a>
		{% endif %}
		<a href="/about-us" class="text-gray-700 hover:text-green-600 duration-200">Qui sommes-nous</a>
		<a href="/outlings" class="text-gray-700 hover:text-green-600 duration-200">Sorties</a>
		<a href="/programs" class="text-gray-700 hover:text-green-600 duration-200">Programmes</a>
	</div>

	<!-- Menu mobile -->
	<div class="md:hidden relative">
		<button id="menu-toggle" class="text-gray-700 hover:text-green-600 focus:outline-none p-2">
			<i id="burger-icon" class="fas fa-bars text-xl"></i>
		</button>

		<div id="dropdown" class="absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg py-2 z-10 hidden">
			{% if is_granted('IS_AUTHENTICATED_FULLY') %}
				<a href="/logout" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Se déconnecter</a>
			{% else %}
				<a href="/login" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Se connecter</a>
				<a href="/register" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">S'inscrire</a>
			{% endif %}
			<a href="/about-us" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Qui sommes-nous</a>
			<a href="/outlings" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Sorties</a>
			<a href="/programs" class="block px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600">Programmes</a>
		</div>
	</div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', function() {
	const menuToggle = document.getElementById('menu-toggle');
	const dropdown = document.getElementById('dropdown');
	const burgerIcon = document.getElementById('burger-icon');

	menuToggle.addEventListener('click', function(e) {
		e.stopPropagation();
		
		const isHidden = dropdown.classList.contains('hidden'); 
		
		dropdown.classList.add('hidden');
		dropdown.classList.remove('animate-slideDown');
		
		if (isHidden) {
			setTimeout(() => {
				dropdown.classList.remove('hidden');
				dropdown.classList.add('animate-slideDown');
				burgerIcon.classList.replace('fa-bars', 'fa-times');
			}, 10);
		} else {
			burgerIcon.classList.replace('fa-times', 'fa-bars');
		}
	});

	document.addEventListener('click', function() {
		dropdown.classList.add('hidden');
		dropdown.classList.remove('animate-slideDown');
		burgerIcon.classList.replace('fa-times', 'fa-bars');
	});

	dropdown.addEventListener('click', function(e) {
		e.stopPropagation();
	});
});
</script>